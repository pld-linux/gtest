--- googlemock-1.8.0/Makefile.am.orig	2016-07-14 19:15:38.000000000 +0200
+++ googlemock-1.8.0/Makefile.am	2016-09-25 12:10:16.229204517 +0200
@@ -7,6 +7,9 @@
 # included in the 'subdirs' variable.
 SUBDIRS = $(subdirs)
 
+
+bin_SCRIPTS = scripts/gmock-config
+
 # This is generated by the configure script, so clean it for distribution.
 DISTCLEANFILES = scripts/gmock-config
 
@@ -21,10 +24,13 @@
 endif
 
 # Build rules for libraries.
-lib_LTLIBRARIES = lib/libgmock.la lib/libgmock_main.la
+check_LTLIBRARIES = lib/libgmock.la lib/libgmock_main.la
 
-lib_libgmock_la_SOURCES = src/gmock-all.cc
+nodist_lib_libgmock_la_SOURCES = src/gmock-all.cc
 
+pkgconfigdir = $(datadir)/pkgconfig
+pkgconfig_DATA = gmock.pc
+  
 pkginclude_HEADERS = \
   include/gmock/gmock-actions.h \
   include/gmock/gmock-cardinalities.h \
@@ -42,12 +48,14 @@
 pkginclude_internal_HEADERS = \
   include/gmock/internal/gmock-generated-internal-utils.h \
   include/gmock/internal/gmock-internal-utils.h \
-  include/gmock/internal/gmock-port.h \
+  include/gmock/internal/gmock-port.h
+pkginclude_internalcustomdir = $(pkgincludedir)/internal/custom
+pkginclude_internalcustom_HEADERS = \
   include/gmock/internal/custom/gmock-generated-actions.h \
   include/gmock/internal/custom/gmock-matchers.h \
   include/gmock/internal/custom/gmock-port.h
 
-lib_libgmock_main_la_SOURCES = src/gmock_main.cc
+nodist_lib_libgmock_main_la_SOURCES = src/gmock_main.cc
 lib_libgmock_main_la_LIBADD = lib/libgmock.la
 
 # Build rules for tests. Automake's naming for some of these variables isn't
@@ -192,8 +200,8 @@
 
 # TODO(vladl@google.com): Find a way to add Google Tests's sources here.
 fused-gmock-internal: $(pkginclude_HEADERS) $(pkginclude_internal_HEADERS) \
-                      $(lib_libgmock_la_SOURCES) $(GMOCK_SOURCE_INGLUDES) \
-                      $(lib_libgmock_main_la_SOURCES) \
+                      $(nodist_lib_libgmock_la_SOURCES) $(GMOCK_SOURCE_INGLUDES) \
+                      $(nodist_lib_libgmock_main_la_SOURCES) \
                       scripts/fuse_gmock_files.py
 	mkdir -p "$(srcdir)/fused-src"
 	chmod -R u+w "$(srcdir)/fused-src"
@@ -215,10 +223,9 @@
 # Mock can lead to undefined behavior due to violation of the
 # One-Definition Rule.
 
-install-exec-local:
-	echo "'make install' is dangerous and not supported. Instead, see README for how to integrate Google Mock into your build system."
-	false
-
-install-data-local:
-	echo "'make install' is dangerous and not supported. Instead, see README for how to integrate Google Mock into your build system."
-	false
+install-exec-hook:
+	mkdir -p $(DESTDIR)$(datadir)/@PACKAGE@ $(DESTDIR)$(prefix)/src/@PACKAGE@/src
+	cp -rf scripts/generator $(DESTDIR)$(datadir)/@PACKAGE@
+	cp -f src/* $(DESTDIR)$(prefix)/src/@PACKAGE@/src
+	cp -f CMakeLists.txt $(DESTDIR)$(prefix)/src/@PACKAGE@
+	sed -i s/src[/]//g $(DESTDIR)$(prefix)/src/@PACKAGE@/src/gmock-all.cc
diff --git a/configure.ac b/configure.ac
index e8b65bd..9ec7743 100644
--- a/configure.ac
+++ b/configure.ac
@@ -10,7 +10,7 @@ AC_PREREQ([2.59])
 AC_CONFIG_SRCDIR([./COPYING])
 AC_CONFIG_AUX_DIR([build-aux])
 AC_CONFIG_HEADERS([build-aux/config.h])
-AC_CONFIG_FILES([Makefile])
+AC_CONFIG_FILES([Makefile gmock.pc])
 AC_CONFIG_FILES([scripts/gmock-config], [chmod +x scripts/gmock-config])
 
 # Initialize Automake with various options. We require at least v1.9, prevent
diff --git a/gmock.pc.in b/gmock.pc.in
new file mode 100644
index 0000000..da4b6c4
--- /dev/null
+++ b/gmock.pc.in
@@ -0,0 +1,14 @@
+#############################
+# Pkg-Config file for gmock #
+#############################
+
+Name: gmock
+Description: Google C++ mocking framework
+URL: https://code.google.com/p/googlemock/
+Version: @VERSION@
+
+prefix=@prefix@
+includedir=@includedir@
+srcdir=@prefix@/src/gmock
+
+Cflags: -I${includedir}/gmock
